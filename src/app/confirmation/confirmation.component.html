<div class="container">
    <div class="section">
        <div class="row">
            <div class="col s12 center">
                <div class="icon-block">
                    <h2 class="center brown-text text-lighten-2"><i class="material-icons">how_to_reg</i></h2>
                </div>
                <h5 class="center">Confirmez votre venue</h5>
                <p class="center light">Complétez le forumlaire ci-dessous avant le <span class="teal-text"
                        style="font-weight: bold">15 février 2020.</span></p>
                <p class="center light red-text" *ngIf="displayErrorMessage">{{ errorMessage }}</p>
                <p class="center light teal-text" *ngIf="successMessage">{{ successMessage }}</p>
            </div>
        </div>

        <form class="col s12" *ngIf="!displaySecondForm && displayForms">
            <div class="row">
                <div class="input-field col m6 s12">
                    <input required id="prenom" name="prenom" type="text" class="validate" [(ngModel)]="surname">
                    <label for="prenom">Prénom</label>
                </div>
                <div class="input-field col m6 s12">
                    <input required id="nom" name="nom" type="text" class="validate" [(ngModel)]="name">
                    <label for="nom">Nom de famille</label>
                </div>
            </div>
            <div class="row center" *ngIf="!displayLoader">
                <button class="btn-large waves-effect waves-light teal lighten-1" (click)="onSearchAttendant()">
                    Valider
                    <i class="material-icons right">send</i>
                </button>
            </div>
            <div class="row center" *ngIf="displayLoader">
                <div class="preloader-wrapper small active">
                    <div class="spinner-layer spinner-teal-only">
                        <div class="circle-clipper left">
                            <div class="circle"></div>
                        </div>
                        <div class="gap-patch">
                            <div class="circle"></div>
                        </div>
                        <div class="circle-clipper right">
                            <div class="circle"></div>
                        </div>
                    </div>
                </div>
            </div>
        </form>

        <form class="col s12" *ngIf="displaySecondForm && displayForms">
            <p class="center light">
                <b>Bonjour {{ attendantData.surname}} {{ attendantData.name }}</b>
            </p>
            <div class="row">
                <div class="input-field col s12">
                    <label>
                        <input type="checkbox" name="isAttending" checked="checked" [(ngModel)]="isAttending" />
                        <span>Je serai présent(e)</span>
                    </label>
                </div>
            </div>
            <div class="row">
                <div class="input-field col m6 s12" style="margin-top: 25px; margin-bottom: -20px">
                    <input required id="email" name="email" type="email" class="validate" [(ngModel)]="email">
                    <label for="email">Email</label>
                </div>
                <div class="input-field col s12" *ngIf="attendantData.plusOne">
                    <label>
                        <input type="checkbox" name="isWithPlusOne" [(ngModel)]="isWithPlusOne" />
                        <span>Je viendrai accompagné(e) de {{ attendantData.plusOne }}</span>
                    </label>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s12">
                    <label>
                        <input type="checkbox" name="needsDriver" [(ngModel)]="needsDriver" />
                        <span>Je souhaite bénéficier du service de chauffeurs remplaçants</span>
                        <span class="helper-text">Plus d'informations <a target="_blank" rel="noopener noreferrer" href="/services" class="teal-text">ici</a>.</span>
                    </label>
                </div>
            </div>
            <div class="row">
            </div>
            <div class="row" *ngIf="attendantData.children != 0">
                <div class="input-field col s12" >
                    <label>
                        <input type="checkbox" name="isWithChildren" [(ngModel)]="isWithChildren" />
                        <span>Je viendrai avec mes enfants</span>
                    </label>
                </div>
            </div>
            <div class="row" *ngIf="attendantData.children != 0" >
                <div class="input-field col m6 s12" *ngIf="isWithChildren" style="margin-top: 25px">
                    <input required id="nbChildren" name="nbChildren" type="number" class="validate"
                        [(ngModel)]="nbChildren">
                    <label for="nbChildren">Nombre d'enfants</label>
                </div>
                <div class="input-field col s12" *ngIf="isWithChildren" style="margin-top: -20px">
                    <label>
                        <input type="checkbox" name="needsBabySitter" [(ngModel)]="needsBabySitter" />
                        <span>J'aurai besoin des services de la baby-sitter</span>
                        <span class="helper-text">Plus d'informations <a target="_blank" rel="noopener noreferrer" href="/services" class="teal-text">ici</a>.</span>
                    </label>
                </div>
            </div>
            <div class="row center" style="padding-top: 37px" *ngIf="!displayLoader">
                <button class="btn-large waves-effect waves-light teal lighten-1" (click)="onConfirm()">
                    Valider
                    <i class="material-icons right">send</i>
                </button>
            </div>
            <div class="row center" *ngIf="displayLoader">
                <div class="preloader-wrapper small active">
                    <div class="spinner-layer spinner-teal-only">
                        <div class="circle-clipper left">
                            <div class="circle"></div>
                        </div>
                        <div class="gap-patch">
                            <div class="circle"></div>
                        </div>
                        <div class="circle-clipper right">
                            <div class="circle"></div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="row center" *ngIf="!displayForms">
        <a routerLink="/" class="btn-large waves-effect waves-light teal lighten-2">Retour à l'accueil</a>
    </div>
</div>